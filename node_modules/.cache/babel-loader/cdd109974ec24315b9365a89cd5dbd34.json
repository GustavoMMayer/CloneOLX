{"ast":null,"code":"import Cookies from 'js-cookie';\nimport qs from 'qs';\nconst BASEAPI = 'http://alunos.b7web.com.br:501';\nconst apiFetchPost = async (endpoint, body) => {\n  if (!body.token) {\n    let token = Cookies.get('token');\n    if (token) {\n      body.token = token;\n    }\n  }\n  const res = await fetch(BASEAPI + endpoint, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(body)\n  });\n  const json = await res.json();\n  if (json.notallowed) {\n    window.location.href = '/signin';\n    return;\n  }\n  return json;\n};\nconst apiFetchGet = async function (endpoint) {\n  let body = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  if (!body.token) {\n    let token = Cookies.get('token');\n    if (token) {\n      body.token = token;\n    }\n  }\n  const res = await fetch(`${BASEAPI + endpoint}?${qs.stringify(body)}`);\n  const json = await res.json();\n  if (json.notallowed) {\n    window.location.href = '/signin';\n    return;\n  }\n  return json;\n};\nconst OlxAPI = {\n  login: async (email, password) => {\n    const json = await apiFetchPost('/user/signin', {\n      email,\n      password\n    });\n    return json;\n  },\n  register: async (name, email, password, stateLoc) => {\n    const json = await apiFetchPost('/user/signup', {\n      name,\n      email,\n      password,\n      state: stateLoc\n    });\n    return json;\n  },\n  getStates: async () => {\n    const json = await apiFetchGet('/states');\n    return json.states;\n  },\n  getCategories: async () => {\n    const json = await apiFetchGet('/categories');\n    return json.categories;\n  },\n  getAds: async options => {\n    const json = await apiFetchGet('/ad/list', options);\n    return json;\n  },\n  getAd: async function (id) {\n    let other = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    const json = await apiFetchGet('/ad/item', {\n      id,\n      other\n    });\n    return json;\n  }\n};\nexport default (() => OlxAPI);","map":{"version":3,"names":["Cookies","qs","BASEAPI","apiFetchPost","endpoint","body","token","get","res","fetch","method","headers","JSON","stringify","json","notallowed","window","location","href","apiFetchGet","OlxAPI","login","email","password","register","name","stateLoc","state","getStates","states","getCategories","categories","getAds","options","getAd","id","other"],"sources":["C:/Users/Dell/Documents/Gustavo/React/Projeto OLX/OLX/FrontEnd/src/helpers/OlxAPI.js"],"sourcesContent":["import Cookies from 'js-cookie';\nimport qs from 'qs';\n\nconst BASEAPI = 'http://alunos.b7web.com.br:501';\n\nconst apiFetchPost = async (endpoint, body) => {\n    if(!body.token) {\n        let token = Cookies.get('token');\n        if(token) {\n            body.token = token;\n        }\n    }\n    const res = await fetch(BASEAPI+endpoint, {\n        method:'POST',\n        headers:{\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body:JSON.stringify(body)\n    });\n    const json = await res.json();\n\n    if(json.notallowed) {\n        window.location.href = '/signin';\n        return;\n    }\n\n    return json;\n}\nconst apiFetchGet = async (endpoint, body = []) => {\n    if(!body.token) {\n        let token = Cookies.get('token');\n        if(token) {\n            body.token = token;\n        }\n    }\n    const res = await fetch(`${BASEAPI+endpoint}?${qs.stringify(body)}`);\n    const json = await res.json();\n\n    if(json.notallowed) {\n        window.location.href = '/signin';\n        return;\n    }\n\n    return json;\n}\n\nconst OlxAPI = {\n\n    login:async (email, password) => {\n        const json = await apiFetchPost(\n            '/user/signin',\n            {email, password}\n        );\n        return json;\n    },\n\n    register:async (name, email, password, stateLoc) => {\n        const json = await apiFetchPost(\n            '/user/signup',\n            {name, email, password, state:stateLoc}\n        );\n        return json;\n    },\n\n    getStates:async () => {\n        const json = await apiFetchGet(\n            '/states'\n        );\n        return json.states;\n    },\n\n    getCategories: async ()=>{\n        const json = await apiFetchGet(\n            '/categories'\n        );\n        return json.categories;\n    },\n\n    getAds: async (options)=>{\n        const json=await apiFetchGet(\n            '/ad/list',\n            options\n        );\n        return json;\n    },\n\n    getAd: async (id, other= false) =>{\n        const json = await apiFetchGet(\n            '/ad/item',\n            {id, other}\n        );\n        return json;\n    }\n\n};\n\nexport default () => OlxAPI;"],"mappings":"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"},"metadata":{},"sourceType":"module"}